{"componentChunkName":"component---src-templates-post-template-tsx","path":"/unexpected-bug-story/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>📌 예기치 않은 버그 해결기</h1>\n<h2>고장 난 시스템에서 정상 작동까지의 여정</h2>\n<h3>🧭 들어가며</h3>\n<p>개발을 하다 보면 정말 ‘이건 말도 안 돼’ 싶은 버그를 만나곤 한다. 로컬에서는 분명 잘 되던 코드가 배포하자마자 망가지는 일, CLI에선 되는데 GUI에선 안 되는 현상, JSON 응답이 두 번 오는 이상한 상황까지… 이번 글에서는 내가 실제로 겪은 <strong>기묘한 오류들</strong>과 그것을 해결하기 위한 <strong>분투의 기록</strong>을 남겨본다.</p>\n<hr>\n<h2>🐞 1. CLI에선 멀쩡한데, GUI에서는 안 돼?</h2>\n<h3>문제 상황</h3>\n<p>어느 날, eXbuilder6 기반의 행정 시스템에서 특정 기능을 CLI로 실행하면 잘 작동했는데, 실제 GUI에서는 결과가 반영되지 않는 이상한 문제가 발생했다. 콘솔 로그로는 정상. API 응답도 성공. 그런데 UI에선 아무 변화가 없다?</p>\n<h3>분석 과정</h3>\n<ul>\n<li>초기엔 전송된 파라미터를 의심했지만 로그상 문제 없음.</li>\n<li>의심을 좁히다 보니, <code class=\"language-text\">lookup(\"control\").value = ...</code> 코드가 <strong>비동기 이벤트 이전에 실행</strong>되고 있었다.</li>\n<li>GUI 환경에서는 DOM 초기화 타이밍이 CLI와 달라 동작 순서가 달라졌던 것.</li>\n</ul>\n<h3>해결 방법</h3>\n<p>GUI에서 컨트롤 초기화가 완료된 후 실행되도록 <code class=\"language-text\">onLoad</code> 이후로 로직을 분리했고, 상태 변경은 <code class=\"language-text\">callback</code> 안에서만 수행하도록 리팩토링하였다.</p>\n<blockquote>\n<p>🚀 교훈: CLI와 GUI는 실행 컨텍스트가 다르다. UI 요소가 개입되면 항상 렌더 타이밍을 고려하자.</p>\n</blockquote>\n<hr>\n<h2>🐛 2. JSON 응답이 두 번? 제우스의 저주</h2>\n<h3>문제 상황</h3>\n<p>로컬 톰캣에서는 JSON 응답이 정상적으로 <code class=\"language-text\">{ \"success\": true }</code> 한 번만 내려왔는데, 운영서버(JEUS)에선 다음과 같은 두 개의 JSON이 연속으로 내려왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"exist\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Y\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"success\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"exist\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Y\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"success\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3>분석 과정</h3>\n<ul>\n<li>필터나 인터셉터에서 두 번 호출되는지 확인 → 이상 없음.</li>\n<li><code class=\"language-text\">PrintWriter</code>를 사용한 응답 처리에서 <code class=\"language-text\">getWriter()</code>를 두 번 호출한 흔적 발견.</li>\n<li>JEUS는 응답 버퍼 처리 방식이 다르기 때문에, <code class=\"language-text\">getWriter()</code> 두 번 호출 시 flush 전에 중복 출력 가능성 있음.</li>\n</ul>\n<h3>해결 방법</h3>\n<ul>\n<li>응답 처리 공통 모듈을 작성하여 <code class=\"language-text\">response.getWriter().write(...)</code> 호출을 한 번으로 제한.</li>\n<li>중간에 응답이 이미 커밋되었는지도 체크하도록 개선.</li>\n</ul>\n<blockquote>\n<p>🔎 교훈: 운영 환경의 WAS(JEUS, WebLogic 등)는 로컬과 다르게 응답 버퍼 처리를 하므로, 모든 I/O는 <strong>한 번만, 신중하게</strong>!</p>\n</blockquote>\n<hr>\n<h2>🔧 3. 개발과 운영 환경의 데이터소스가 다르게 동작?</h2>\n<h3>문제 상황</h3>\n<p>개발 환경에서는 잘 동작하는 DAO 쿼리가 운영에서는 계속 실패. <code class=\"language-text\">java:comp/env/techdom.ds</code> 로 설정했는데, JNDI에서 자꾸 <code class=\"language-text\">not found</code> 오류가 발생했다.</p>\n<h3>분석 과정</h3>\n<ul>\n<li>로컬 <code class=\"language-text\">context.xml</code>, <code class=\"language-text\">web.xml</code>, JEUS의 JNDI 설정 모두 비교.</li>\n<li>알고 보니, 운영에서는 <code class=\"language-text\">global</code> context에 설정돼 있어 상대경로(<code class=\"language-text\">comp/env/...</code>)가 통하지 않았다.</li>\n</ul>\n<h3>해결 방법</h3>\n<ul>\n<li><code class=\"language-text\">lookup(\"java:/techdom.ds\")</code> 방식으로 절대 경로로 변경.</li>\n<li>또는 서버 측 JNDI 설정을 <code class=\"language-text\">comp/env</code> 하위로 맞춤.</li>\n</ul>\n<blockquote>\n<p>🛠️ 교훈: JNDI는 환경마다 상대 경로가 달라질 수 있다. WAS 설정을 먼저 확인하고 코드를 맞추자.</p>\n</blockquote>\n<hr>\n<h2>🚨 4. CLEOPATRA XML 변환 시 GROUP 태그가 안 나와?</h2>\n<h3>문제 상황</h3>\n<p>Figma JSON을 CLEOPATRA XML로 변환하는 도구에서 <code class=\"language-text\">GROUP</code> 노드가 있음에도 불구하고 <code class=\"language-text\">.clx</code> 파일에 <code class=\"language-text\">&lt;cl:grid></code>가 생성되지 않음. 더 이상한 건 어떤 경우엔 중복 생성되기도 함.</p>\n<h3>분석 과정</h3>\n<ul>\n<li>부모 → 자식 순으로 처리되는 방식에서 GROUP이 두 번 호출됨.</li>\n<li>중간에 <code class=\"language-text\">visible</code> 속성이 false로 설정된 것도 무시하지 않고 처리한 게 문제.</li>\n</ul>\n<h3>해결 방법</h3>\n<ul>\n<li><code class=\"language-text\">visible == false</code> 인 경우 변환 제외하도록 예외 처리 추가.</li>\n<li>이미 생성된 GRID의 ID를 Map에 저장해 중복 방지.</li>\n</ul>\n<blockquote>\n<p>💡 교훈: 변환 과정에선 <strong>명시적으로 제외 조건</strong>을 먼저 걸어두고, 변환 조건을 점진적으로 확장하는 것이 안정적이다.</p>\n</blockquote>\n<hr>\n<h2>🏁 마치며</h2>\n<p>이번에 겪었던 문제들은 하나같이 “설마 이게 문제일까?” 싶은 것들이었다. 하지만 결국엔 로그를 정리하고, 상황을 하나씩 좁히며 핵심을 찾아냈다.<br>\n프로젝트가 클수록, 환경이 복잡할수록 이런 오류는 자주 생기기 마련이다. 중요한 건, <strong>당황하지 않고 하나씩 차분히 분석하고 기록하는 것.</strong></p>\n<blockquote>\n<p>버그는 ‘기억’을 지우지만, 기록은 ‘지식’을 만든다.</p>\n</blockquote>\n<hr>\n<p><strong>🧷 태그:</strong> <code class=\"language-text\">#버그해결기</code> <code class=\"language-text\">#JEUS</code> <code class=\"language-text\">#JSON</code> <code class=\"language-text\">#JNDI</code> <code class=\"language-text\">#GUI오류</code> <code class=\"language-text\">#Figma변환기</code></p>","frontmatter":{"title":"📌 예기치 않은 버그 해결기","summary":"고장 난 시스템에서 정상 작동까지의 여정","date":"2025.06.26.","categories":["Error"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEvklEQVR42lWUWVBTdxTG70xf+lqsHS1CsdVWK6hIp1SoBXEpVgdZRBq0UEGKKIsIIsQOWhCXgJARh00ghEUWTSBhMRCy3CSQRQIkF0iQJdtNIBgFLBZD7s2/lzrtTGd+D2fOmTPzzVk+CDfy/oWPm/i4WYyjIkzPXY9RIW4ROxdEwCYANuH/eEWUBBD2X6cZxucVjok6h7YJXxhy2p5jiwhYUQ8oYHp7ZyOT1cBk0Rkd9f9Q18Y0jHQRzf2YkY+hsMMkdJp5f7YELDYfA29GwQqC2yeBTZHfJQ+rEodTOSepvVEPuZGlfVGlfccpXaxn7RAhD8yLwDwMFgaBpQuXpjkkaWCBpxvuaaSQ44MCcgtuV0mH7knGHsiGa5FJxvQsW6dvndHLERH05gWH39MsEbKVQ/xhZEA/9fylWWXR8MO9vf0/cT27zyvYzS3y8PFSWNEq4uZ0Km5y1TWq6QatTqYSQlwW3WM/aZtvqJdfRGhgyDb/KHe/6LoG+qPsBFH2ScPD+NyQA2H7fArY/GQ2cofB6RF1DAx1tqlGpGoxxGmn+wSRIgOD6g7tbT/ieSfI94PPAmqaGlAlo/1KWFfOacH1U5qHF2rEkhZOa0Vbc26PtEqhpo9NydUw1M+iu++Pivv+ADN4z93A3Zzj+3YERtc2NbxDJcqCGEPRmbX6BPWz8uJxM0WkzOMOFQ5q7g9qKxCdVAVDvA7alsD4nYGkRwFe8NEv0319PMMvPe3tBPgMhrTZG1NXy2OsT8hP2LS2ESVDM9E1NtI9MfpUKdNreRCvs8HDn+QTknDxYmZeSmr0hcxNu4NzqGVW2ziu65m7f8xG+cmW5zuX+rHtjp9dVg5WNGBxBJiFxHVAfR10l70R3odIpIvXg3+9+iMp9SOvkIqa6gnDKEINN19yMV5xN2W4mbK2ziRtNJO3r+n7ncsIhhLXIYCm5cy8e8UZf1A+3B4cFptOq6fV0mnGqYEVddNs4S4LJcBwbY8lc7Mxwx3N+tySvvEtTHVO098wIp1mGHKa+dgrKauj9ewlcl5JuXZSCrBJgJsWa6I0CW6vq86v1iVbbux/kbRFn77VlLJhuTkBF51bqvrKqamECOlLOiFHLpi3qog3eDfebp+TvVXS0Zydo+fcDbkHHU3RtpLQqSTX6WSPF3EutspI8Po5PtuBzbAhYOZPIr2pjzuZMsFay5WF4qil8jPTiS5oyoaxuM26y26ma66KM66GLI+/qjyXH+ywt/wARnNxYy+OSiCnib+qF2g1wnG1ICn2txNhcSWXz6+UBFmpR63Mm2iutzHtU23ilqmsL9a6/QF3d2/1Kbj8KNCWrZnEEG7gYSYYvBTnU8t2RZA9Y/ITK9tQ/QBYHLbPyc1537zM2GTNcMOL3Purf/694GrOrWuvGAfBJA0zSSCHgQcswvmxZ0G/kLefyDxHLipmsU9Q6hCtxG6RHg6N/db3oO93R9KiA1YZ3kV3E4wt/oD9NTZBw1Ax9N4JCPGoqruysmJczgLLMuuUgBjb0ixMvlWYlJ1/Ifv2jYL8gcfpVkE2QO5hI4W4rnt9z4STvDcTMCcEixJ8TujQ9xNTJDIYIWrdg8QEzgXxGjpoR6WYZR3cJMSM/L8Bwf4ZTm/55asAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/bf282628a3315f92828c70ccbac21e08/34104/error.png","srcSet":"/static/bf282628a3315f92828c70ccbac21e08/5ce94/error.png 256w,\n/static/bf282628a3315f92828c70ccbac21e08/8a20a/error.png 512w,\n/static/bf282628a3315f92828c70ccbac21e08/34104/error.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/bf282628a3315f92828c70ccbac21e08/99d55/error.webp 256w,\n/static/bf282628a3315f92828c70ccbac21e08/3591c/error.webp 512w,\n/static/bf282628a3315f92828c70ccbac21e08/e306d/error.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/bf282628a3315f92828c70ccbac21e08/error.png"}}}}]}},"pageContext":{"slug":"/unexpected-bug-story/"}},"staticQueryHashes":[],"slicesMap":{}}