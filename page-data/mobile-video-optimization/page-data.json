{"componentChunkName":"component---src-templates-post-template-tsx","path":"/mobile-video-optimization/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>📌 Mobile Video 성능 최적화: 모바일 청첩장 프로젝트 사례로 보는 실전 가이드</h1>\n<h2>개요</h2>\n<p>모바일 청첩장을 제작하며, 모바일 기기에서 배경 영상(<code class=\"language-text\">.mp4</code>, <code class=\"language-text\">.webm</code>)이 느리게 로딩되거나 끊기는 현상이 발견되었다. 특히 3G 또는 저속 네트워크 환경에서의 경험이 현저히 나빠지는 문제가 발생했다. 이를 해결하기 위해 다양한 테스트와 성능 최적화를 시도하였고, 그 과정을 기록으로 남긴다.</p>\n<hr>\n<h2>1. 문제 발생 배경</h2>\n<h3>💬 문제 현상</h3>\n<ul>\n<li><strong>영상 로딩 지연</strong>: 첫 진입 시 영상이 늦게 시작되거나, 정지된 채 멈춤</li>\n<li><strong>모바일 기기 이슈</strong>: iOS Safari 또는 저사양 Android에서 끊김 발생</li>\n<li><strong>모바일 네트워크</strong>: LTE, 5G에서는 괜찮지만, 3G/저속에서는 거의 영상 미출력</li>\n</ul>\n<h3>🔍 사용 중인 기술 스택</h3>\n<ul>\n<li>Front: Next.js</li>\n<li>배포: Vercel</li>\n<li>영상 포맷: <code class=\"language-text\">wedding-bg.mp4</code>, <code class=\"language-text\">wedding-bg.webm</code></li>\n<li>백그라운드 방식: <code class=\"language-text\">&lt;video autoplay muted loop playsinline></code></li>\n</ul>\n<hr>\n<h2>2. 원인 분석</h2>\n<h3>원인 1. <strong>모바일 네트워크 속도 불안정</strong></h3>\n<ul>\n<li>3G 기준 다운로드 속도: 평균 0.5 ~ 1.5 Mbps</li>\n<li>초기 영상 로딩에만 수 MB 소요되어 UX 손실</li>\n</ul>\n<h3>원인 2. <strong>브라우저별 autoplay 정책</strong></h3>\n<ul>\n<li>iOS Safari는 muted 속성이 있어야 autoplay 가능</li>\n<li>playsinline이 없으면 전체화면 강제됨 → UX 파괴</li>\n</ul>\n<h3>원인 3. <strong>영상 포맷 및 해상도</strong></h3>\n<ul>\n<li><code class=\"language-text\">.mp4</code> + <code class=\"language-text\">.webm</code> 모두 제공 중이나 1080p 해상도였음</li>\n<li>모바일에 과한 해상도</li>\n</ul>\n<hr>\n<h2>3. 해결을 위한 최적화 전략</h2>\n<h3>✅ 전략 1. <strong>영상 인코딩 최적화</strong></h3>\n<ul>\n<li>해상도: 1080p → 720p 또는 480p로 낮춤</li>\n<li>Bitrate: 2<del>4Mbps → 0.8</del>1.2Mbps로 줄임</li>\n<li>GOP 설정: Keyframe 간격 최적화로 seeking 성능 향상</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ffmpeg <span class=\"token parameter variable\">-i</span> input.mp4 <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">854</span>:480 <span class=\"token parameter variable\">-b:v</span> 1000k <span class=\"token parameter variable\">-bufsize</span> 1000k <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-movflags</span> +faststart output.mp4</code></pre></div>\n<h3>✅ 전략 2. <strong><code class=\"language-text\">&lt;video></code> 태그 속성 정비</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span> <span class=\"token attr-name\">loop</span> <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/videos/wedding-bg.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/videos/wedding-bg.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>✅ 전략 3. <strong>LCP 관점에서 이미지 fallback 도입</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">...</span> <span class=\"token attr-name\">poster</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/video-fallback.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>...<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>✅ 전략 4. <strong>Lazy Load + IntersectionObserver 도입</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entries</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isIntersecting<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>✅ 전략 5. <strong>CDN 최적화 및 Vercel 헤더 설정</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"headers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/videos/(.*)\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"headers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"public, max-age=31536000, immutable\"</span> <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2>4. 네트워크 별 성능 테스트</h2>\n<table>\n<thead>\n<tr>\n<th>네트워크 환경</th>\n<th>영상 로딩 시간 (초)</th>\n<th>UX 체감</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5G</td>\n<td>0.5~1.0</td>\n<td>매우 쾌적</td>\n</tr>\n<tr>\n<td>LTE</td>\n<td>1.5~2.5</td>\n<td>쾌적</td>\n</tr>\n<tr>\n<td>3G (시뮬레이션)</td>\n<td>4.5~6.0</td>\n<td>로딩지연, UX 저하</td>\n</tr>\n<tr>\n<td>Wi-Fi (10Mbps)</td>\n<td>0.3~0.6</td>\n<td>매우 쾌적</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>✅ 영상 fallback 적용 + 해상도 최적화 이후, 3G에서도 3초 내 진입 가능</p>\n</blockquote>\n<hr>\n<h2>5. 모바일 영상 퍼포먼스 체크리스트</h2>\n<table>\n<thead>\n<tr>\n<th>항목</th>\n<th>체크</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>해상도 480p/720p 제공 여부</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">.webm</code> + <code class=\"language-text\">.mp4</code> 포맷 동시 지원</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;video></code> autoplay, muted, playsinline</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">poster</code> 이미지 fallback 제공</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Lazy loading 및 JS 최적화</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>CDN 캐싱 및 헤더 설정</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>실제 저속 네트워크 환경 테스트</td>\n<td>✅</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2>6. 결론 및 회고</h2>\n<p>모바일 웹에서 영상은 “리스크 높은 자산”이다. 청첩장과 같은 감성 기반 UX를 위해 영상이 필수였지만, 오히려 사용자 경험을 해치는 요소가 될 수 있음을 깨달았다.</p>\n<blockquote>\n<p><strong>“퍼포먼스 최적화는 기능이 아닌 기본”</strong><br>\n영상의 존재 자체보다, 그것을 어떻게 전달하느냐가 핵심이다.</p>\n</blockquote>\n<hr>\n<h2>💡 참고 자료</h2>\n<ul>\n<li><a href=\"https://web.dev/video-optimization/\" target=\"_blank\" rel=\"nofollow\">Google: Media Loading Best Practices</a></li>\n<li><a href=\"https://vercel.com/docs/edge-network/caching\" target=\"_blank\" rel=\"nofollow\">Vercel Caching Guide</a></li>\n</ul>","frontmatter":{"title":"모바일 비디오 최적화 가이드","summary":"모바일 환경에서의 비디오 성능 최적화 기법","date":"2024.11.20.","categories":["Mobile"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD3klEQVR42l1UaVPbVhT1v+rP6Jd+aL60zHSbTpuZZsqkNQ1gmhSmQKAGL9glLMHYxniRdxtjW17QYsmyZSwjyQYv8s6WhLQF0pZe4ZDpRHM080bSubrnnPueIlNuDkDdAhaEIBF8gxDeg8TWuvBBvtalD9uDLxXvyDJEiTnqFKVjrnkids+FWxy0TguNPjy0obkfDN6ZrViKq9KHLVK8I2cP23SlBcxgpjRmcAyrLUMTxiGV4dMJw/3ZjXGjU+9Ch/UenQd/aPBpkTR0QYiSAhogRSnCiJGcmK/1RrS2UJrxoNRnqqWvnxiHxrTzJj/LHw3Pb3z+q3nBtfdAgxh9eO6oI5MHIieW3aplBEqojM5O/+Svy0upexzPlvha6+L1n5dXl0v2iM6VmNzc1biSOF8HMjXQTJabO1nehjJQ5ZF+u9U9dsRprT267k//jqC/WcLN3onGGvIRXDRf8Wd4BOeCtCAbBtah+4c6Z3x4wRLIlH5ZQXBWMIdxR5R07BIf/6ieMwXSrGB07G7skN9pXF89tX85a39i2iX4+tu23di+I5lLFqtTq54VJB6lS/ce6cf1ti9+Nm74EtYdApRvo4zamZzcjKrWwtB8BtwGt0CAzoUqddtB6mByxR1IMdOmwEcP1coF84cPZj/4ZNQWIRctQQ9ehDhQtgyJQtpyVCCYrrTjbMVPcrJzRmcyWzI6Y0iMNAdS90YWvpla8adymq2wJUrTB7Wz85d4sZLkqlSlpYAbQrdGaUgSLBldsjc7/YJQjRGFXZxNZbncwdH5i1fzmwFzCMNyB+vuuGMHizO8TIZZieUrGkds2hSEqMcNjka7h1JFiNqXoN3xzLoHbbT7i9aQJUJirGgJYd5ENsGWqXJL1gyGg1XLvj2Mb4wt2aV2jyqWCVbA8nyaKSWoYqd/qt0K2xO5xP5Rvtq9m+VBzmIT+DBepdbpTzqb1O6/eHXBivV0XqS4w+7J2cXrP4A8+sx3fxExRWigySjfug3dR/Pl1QDmShemVt2WMP691qU0eC07pDfJwMDEKE69GXjmx76ds46vBkhBGvBlMuwKL8FpnXFrLPt4GSmINUao54QaX21VGm2h1pI6x2pzwEcUY3kREgG1pHjXNvwZ5xsQNaSlXLT2T85u/v37zZvr6+ur6yu4Lm9u/pkz+ZypPFvrAfndFlZAAaiU5qpLSMKD7YPtI4uWp8+902vumTXPzLpn9rl3ctmp1FjBTvghdDoQ/JY8OEZgaGCAYFcjewXYJNuJHAAWgK04A7MA6mTm/w4PxcD0zG3JwTvorVDvw+kh43ax3+hD0feYmXLzP0bYmWH6e7O8AAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/dc559238120da767ad6392aee139f75e/34104/Mobile.png","srcSet":"/static/dc559238120da767ad6392aee139f75e/5ce94/Mobile.png 256w,\n/static/dc559238120da767ad6392aee139f75e/8a20a/Mobile.png 512w,\n/static/dc559238120da767ad6392aee139f75e/34104/Mobile.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/dc559238120da767ad6392aee139f75e/99d55/Mobile.webp 256w,\n/static/dc559238120da767ad6392aee139f75e/3591c/Mobile.webp 512w,\n/static/dc559238120da767ad6392aee139f75e/e306d/Mobile.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/dc559238120da767ad6392aee139f75e/Mobile.png"}}}}]}},"pageContext":{"slug":"/mobile-video-optimization/"}},"staticQueryHashes":[],"slicesMap":{}}