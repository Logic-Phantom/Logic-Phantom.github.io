{"componentChunkName":"component---src-templates-post-template-tsx","path":"/web_security_policies/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>🌐 웹 보안 정책 심층 가이드</h1>\n<p>CSRF, XSS, SSRF, CORS, CSP 완전 정복</p>\n<p>웹 애플리케이션은 점점 더 복잡해지고 있으며, 그만큼 보안 위협도 교묘해지고 있습니다.<br>\n이번 글에서는 <strong>웹 보안 정책에서 반드시 알아야 할 핵심 개념</strong>인 CSRF, XSS, SSRF, CORS, CSP를<br>\n기본 원리부터 실무 적용, 그리고 전문가 레벨의 심화 내용까지 단계적으로 정리합니다.</p>\n<hr>\n<h2>1️⃣ CSRF (Cross-Site Request Forgery)</h2>\n<h3>🧩 기본 개념</h3>\n<ul>\n<li><strong>정의</strong>: 사용자가 의도하지 않은 요청을 특정 웹 애플리케이션에 강제로 보내는 공격 기법.</li>\n<li><strong>비유</strong>: 은행 사이트에 로그인한 사용자가 공격자가 심어둔 링크를 클릭 → 모르는 사이에 송금 요청 발생.</li>\n</ul>\n<h3>⚙️ 동작 원리</h3>\n<ol>\n<li>사용자가 신뢰할 수 있는 사이트(<code class=\"language-text\">bank.com</code>)에 로그인 → 세션 쿠키 저장됨.</li>\n<li>공격자가 악성 페이지(<code class=\"language-text\">evil.com</code>)를 열도록 유도.</li>\n<li>그 페이지가 <code class=\"language-text\">bank.com/transfer?to=attacker&amp;amount=1000</code> 요청 자동 전송.</li>\n<li>세션 쿠키가 자동으로 첨부되어 정상적인 요청처럼 처리됨.</li>\n</ol>\n<h3>🛡️ 방어 기법</h3>\n<ul>\n<li><strong>CSRF Token (Anti-CSRF Token)</strong>: 요청마다 고유 난수 토큰 포함.</li>\n<li><strong>SameSite Cookie</strong>: <code class=\"language-text\">Strict</code> 또는 <code class=\"language-text\">Lax</code> 속성으로 크로스 도메인 쿠키 전송 차단.</li>\n<li><strong>Double Submit Cookie</strong>: 쿠키와 파라미터에 같은 토큰 전달 후 서버에서 비교.</li>\n</ul>\n<h3>🎯 전문가 관점</h3>\n<ul>\n<li>OAuth, JWT 기반 시스템에서도 <strong>state 파라미터</strong>와 <strong>nonce 값</strong>으로 CSRF를 방어.</li>\n<li>Single Page Application(SPA)에서는 CSRF보다 XSS가 더 위협적 → CSRF 대비책을 적용해도 XSS로 토큰 유출 시 무력화 가능.</li>\n</ul>\n<hr>\n<h2>2️⃣ XSS (Cross-Site Scripting)</h2>\n<h3>🧩 기본 개념</h3>\n<ul>\n<li><strong>정의</strong>: 악성 스크립트(JS 등)를 삽입하여 사용자 브라우저에서 실행시키는 공격.</li>\n<li><strong>종류</strong>:\n<ul>\n<li><strong>Stored XSS</strong>: 서버 DB에 저장 → 모든 사용자에게 전파.</li>\n<li><strong>Reflected XSS</strong>: URL 파라미터 등에 포함 → 즉시 반사되어 실행.</li>\n<li><strong>DOM-based XSS</strong>: 클라이언트 JS 코드의 불안전한 DOM 조작에서 발생.</li>\n</ul>\n</li>\n</ul>\n<h3>⚙️ 동작 원리</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;script>alert('XSS')&lt;/script><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>→ 필터링 없이 렌더링되면 사용자 브라우저에서 실행됨.</p>\n<h3>🛡️ 방어 기법</h3>\n<ul>\n<li><strong>입력 검증(Input Validation)</strong>: 허용된 값만 처리(화이트리스트 기반).</li>\n<li><strong>출력 인코딩(Output Encoding)</strong>: HTML, JS, URL 컨텍스트별로 적절한 인코딩 적용.</li>\n<li><strong>CSP(Content Security Policy)</strong> 활용: 임의 스크립트 차단, 특정 도메인 스크립트만 허용.</li>\n</ul>\n<h3>🎯 전문가 관점</h3>\n<ul>\n<li>XSS는 단순 알림창 공격이 아니라 <strong>세션 탈취, 키로깅, 피싱, 크립토마이닝</strong>까지 확장됨.</li>\n<li><strong>Trusted Types API</strong>(최신 브라우저)로 DOM 삽입 시 정책 기반 방어 가능.</li>\n<li>React, Vue 같은 프레임워크도 <strong>XSS 방어 내장</strong>하지만 <code class=\"language-text\">v-html</code>/<code class=\"language-text\">dangerouslySetInnerHTML</code> 사용 시 여전히 취약.</li>\n</ul>\n<hr>\n<h2>3️⃣ SSRF (Server-Side Request Forgery)</h2>\n<h3>🧩 기본 개념</h3>\n<ul>\n<li><strong>정의</strong>: 공격자가 서버가 대신 외부 요청을 보내도록 속이는 공격.</li>\n<li><strong>비유</strong>: 사용자가 도서관에 “이 책 찾아줘”라고 했는데, 공격자는 “직원 전용 금고 열어봐”라고 시키는 꼴.</li>\n</ul>\n<h3>⚙️ 동작 원리</h3>\n<ol>\n<li>애플리케이션이 URL 입력을 받아 외부 리소스를 가져옴.</li>\n<li>공격자가 내부망 주소(<code class=\"language-text\">http://127.0.0.1:8080/admin</code>)를 전달.</li>\n<li>서버가 내부 자원에 직접 접근하여 정보 유출.</li>\n</ol>\n<h3>🛡️ 방어 기법</h3>\n<ul>\n<li><strong>Allowlist 기반 접근 제한</strong>: 허용된 도메인만 요청.</li>\n<li><strong>내부망 접근 차단</strong>: <code class=\"language-text\">localhost</code>, <code class=\"language-text\">169.254.*</code>, <code class=\"language-text\">10.*</code> 등 사설망 요청 필터링.</li>\n<li><strong>Proxy 사용</strong>: 모든 요청을 프록시로 보내어 로깅 및 제어.</li>\n</ul>\n<h3>🎯 전문가 관점</h3>\n<ul>\n<li>SSRF는 단순 정보 유출을 넘어서 → **클라우드 메타데이터 API 탈취(AWS EC2 IAM Role 크리덴셜 등)**로 이어짐.</li>\n<li>최신 보안 가이드라인에서는 SSRF를 OWASP Top 10 (2021) 주요 취약점으로 포함.</li>\n</ul>\n<hr>\n<h2>4️⃣ CORS (Cross-Origin Resource Sharing)</h2>\n<h3>🧩 기본 개념</h3>\n<ul>\n<li><strong>정의</strong>: 브라우저 보안 정책(Same-Origin Policy)을 완화해 다른 출처(origin)의 자원에 접근할 수 있게 하는 메커니즘.</li>\n<li><strong>문제 상황</strong>: <code class=\"language-text\">frontend.com</code> → <code class=\"language-text\">api.com</code> 요청 시 기본적으로 차단됨.</li>\n</ul>\n<h3>⚙️ 동작 원리</h3>\n<ol>\n<li>브라우저가 Preflight Request(<code class=\"language-text\">OPTIONS</code>) 전송.</li>\n<li>서버가 <code class=\"language-text\">Access-Control-Allow-Origin</code> 헤더로 허용 여부 응답.</li>\n<li>조건이 맞을 경우 실제 요청 진행.</li>\n</ol>\n<h3>🛡️ 방어 기법</h3>\n<ul>\n<li><strong>정확한 Origin 설정</strong>: <code class=\"language-text\">*</code> 대신 필요한 도메인만 허용.</li>\n<li><strong>인증 정보 포함 시 (<code class=\"language-text\">withCredentials: true</code>)</strong> → <code class=\"language-text\">*</code> 불가, 반드시 명시된 도메인 사용.</li>\n<li><strong>최소 권한 정책 적용</strong>: 불필요한 메서드(<code class=\"language-text\">PUT</code>, <code class=\"language-text\">DELETE</code>) 허용하지 않기.</li>\n</ul>\n<h3>🎯 전문가 관점</h3>\n<ul>\n<li>잘못된 CORS 설정은 <strong>CSRF보다 더 위험</strong> → 다른 도메인에서 API를 악용 가능.</li>\n<li>일부 개발자는 편의를 위해 <code class=\"language-text\">Access-Control-Allow-Origin: *</code>로 설정 → 보안 취약점 유발.</li>\n<li>내부망 API를 외부에 노출할 때 특히 주의 필요.</li>\n</ul>\n<hr>\n<h2>5️⃣ CSP (Content Security Policy)</h2>\n<h3>🧩 기본 개념</h3>\n<ul>\n<li><strong>정의</strong>: 웹 애플리케이션에서 로드할 수 있는 리소스를 제어하는 보안 정책.</li>\n<li><strong>목적</strong>: XSS, 데이터 인젝션 등 스크립트 실행을 방지.</li>\n</ul>\n<h3>⚙️ 동작 원리</h3>\n<ul>\n<li>서버가 응답 헤더에 <code class=\"language-text\">Content-Security-Policy</code> 설정:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header\"><span class=\"token header-name keyword\">Content-Security-Policy</span><span class=\"token punctuation\">:</span> <span class=\"token header-value csp languages-csp\">default-src 'self'; script-src 'self' https://apis.google.com</span></span></code></pre></div>\n<p>→ 오직 같은 출처와 <code class=\"language-text\">apis.google.com</code>에서만 JS 로드 가능.</p>\n<h3>🛡️ 방어 기법</h3>\n<ul>\n<li>**기본 정책(default-src)**을 좁게 설정 후 필요한 경우만 개별 허용.</li>\n<li><strong>Nonce/Hash 기반 실행 허용</strong>: 인라인 스크립트 차단 후 특정 해시/난수만 허용.</li>\n<li><strong>Report-Only 모드</strong> 활용: 실제 차단 전 정책 테스트 가능.</li>\n</ul>\n<h3>🎯 전문가 관점</h3>\n<ul>\n<li>CSP는 XSS 완벽 차단 수단이 아님 → 개발자의 설정 방식에 따라 우회 가능.</li>\n<li>현대 브라우저에서는 CSP + Subresource Integrity(SRI) 조합으로 보안 강화.</li>\n<li>대규모 서비스에서는 <strong>CSP violation 리포트</strong>를 로그로 수집해 공격 탐지 가능.</li>\n</ul>\n<hr>\n<h2>🚀 결론: 보안 정책은 ‘레이어드(다층) 접근’이 핵심</h2>\n<ul>\n<li><strong>CSRF</strong>: 토큰 + SameSite 쿠키</li>\n<li><strong>XSS</strong>: 인코딩 + CSP + 프레임워크 안전 API</li>\n<li><strong>SSRF</strong>: Allowlist + 내부망 차단</li>\n<li><strong>CORS</strong>: 최소 권한 설정</li>\n<li><strong>CSP</strong>: 기본 정책 + Nonce/Hash 기반 허용</li>\n</ul>\n<p>👉 단일 정책만 믿으면 안 되고, <strong>여러 방어 기법을 조합한 Defense in Depth 전략</strong>이 필수입니다.<br>\n👉 또한 개발 단계에서 보안을 고려하는 <strong>Security by Design</strong>이 장기적으로 비용 절감과 서비스 신뢰도 확보에 기여합니다.</p>\n<hr>\n<p>📌 <strong>참고 자료</strong></p>\n<ul>\n<li><a href=\"https://owasp.org/Top10/\" target=\"_blank\" rel=\"nofollow\">OWASP Top 10 (2021)</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/Security\" target=\"_blank\" rel=\"nofollow\">MDN Web Docs - Web Security</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/security/csp\" target=\"_blank\" rel=\"nofollow\">Google Web Fundamentals - CSP</a></li>\n</ul>","frontmatter":{"title":"🌐 웹 보안 정책 심층 가이드 ","summary":"알쓸웹보(알면 쓸만한 웹 보안정책)","date":"2025.08.26.","categories":["Web","Polices"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACz0lEQVR42mOQ8mqCIGnvJmGXOlmfFjmfFgmPRmmvZiBb1qcZyJbyBClQCeqQ8W6GqwciBrC2ZlG3erP4iTPXHm+bt6dv6cHYumW107fXz9hRMXlrYe/GzgV7m2btKujdkNmxFmwu2DKoZq8mcY8G9ZDO7K51gaULivs3hZQvTGlZldCwIrN9TUb7muzOtXF1y8ziJwARwqUQzRCWpEcDl1WxiHNV+eStE5cdapmzO6N9bdOcXe3z9nQt3OtfPE/IuU7Bv13Ks1HKqxnJ2V5NYu4Ngo5Voi61Ml6NOuHd1smTPXJnuWRMdcue7pw5zSNvrnZ4n7x/h1ZEn4RrtZRHPVSzjE+zkHONe/aUmhk7ymfstE+fwm1dzGqWD3SIRnifamiPmFuDoEN5UZGHglelhHujRliXsn+rlGcDSLO8XyubZenEpXv/////ccH8zORGuaCOlIbFNmkz+1aeaF6w3yh+Tntb+J1dsq2tfoJOTdoRPapBbdJeYM3goK6zSpyYUjcjIzhPxbYwpHIh0KDZ648XTdpe0L9l3qYzjy/NmdobmFMUJuHWIOdZJ+Veh/CzlHeLuGuNiXeYUUgat0N1YsOyw2euT166O7djdV7XGiDj2Pk71inzAgoXb9h1bOH6/SZxfSJuDcB0AbS5Udi9zTY6f1K76+R2DxXP3PDKpa9evXn19v2Z81dPnL74/sOnJ0+eOWVMaZi6/tPHd48ePLKN6xJybZABapbxbuR3aQ/KTLu+VePGDj3jkGyrtHmrdp29eP3ext0n9hy9cPnGvYWbT+lE9ldPWPPo3ceXkyZviszgcwNqbgY5W8KzWdWvKiQ9JSAlVd6rStKzWdavXTO4TSe0TSukVSOkXca3TdKzUcG7Qdq3JdS7KNG/WNgTKZEA9Qu4tgs4gzwv4VIl5lwp4Vol41En41kn7lIl7gLkVgOlgPEn6NnC79EMSaEA+LhG8WcE8JoAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/188d5311f7570bc06a3c9d4e610238a9/4d776/Polices.png","srcSet":"/static/188d5311f7570bc06a3c9d4e610238a9/4a410/Polices.png 384w,\n/static/188d5311f7570bc06a3c9d4e610238a9/f5189/Polices.png 768w,\n/static/188d5311f7570bc06a3c9d4e610238a9/4d776/Polices.png 1536w","sizes":"(min-width: 1536px) 1536px, 100vw"},"sources":[{"srcSet":"/static/188d5311f7570bc06a3c9d4e610238a9/b642b/Polices.webp 384w,\n/static/188d5311f7570bc06a3c9d4e610238a9/c9564/Polices.webp 768w,\n/static/188d5311f7570bc06a3c9d4e610238a9/18b4b/Polices.webp 1536w","type":"image/webp","sizes":"(min-width: 1536px) 1536px, 100vw"}]},"width":1536,"height":1024}},"publicURL":"/static/188d5311f7570bc06a3c9d4e610238a9/Polices.png"}}}}]}},"pageContext":{"slug":"/web_security_policies/"}},"staticQueryHashes":[],"slicesMap":{}}