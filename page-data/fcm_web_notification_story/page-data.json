{"componentChunkName":"component---src-templates-post-template-tsx","path":"/fcm_web_notification_story/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>🧠 알림이 팡! 구글 FCM으로 윈도우 알림 보내기 대작전</h1>\n<h2>📖 들어가는 이야기</h2>\n<p>옛날 옛적에, ‘알림 왕국’에 살던 개발자 토끼 ‘알람이’는 생각했어요.</p>\n<blockquote>\n<p>“내가 만든 웹사이트에서 누가 새로운 소식을 남기면, 컴퓨터 오른쪽 아래에서 딱! 하고 알려주면 좋지 않을까?”</p>\n</blockquote>\n<p>그렇게 알람이는 구글의 FCM(Firebase Cloud Messaging)과 서비스 워커라는 마법 도구를 배워서, 드디어 윈도우에서도 알림을 보내는 신기한 능력을 얻게 됩니다!</p>\n<p>오늘은 알람이와 함께, <strong>브라우저에서 윈도우 알림을 띄우는 마법 같은 여정</strong>을 함께 떠나보아요.</p>\n<hr>\n<h2>🎯 목표</h2>\n<ul>\n<li>브라우저에서 백그라운드로 알림 받기</li>\n<li>구글 FCM 서버와 API 사용하기</li>\n<li>Service Worker를 사용해서 알림 띄우기</li>\n</ul>\n<hr>\n<h2>🗺️ 전체 프로세스 한눈에 보기</h2>\n<div class=\"gatsby-highlight\" data-language=\"plaintext\"><pre class=\"language-plaintext\"><code class=\"language-plaintext\">[1] 사용자 접속 → [2] 알림 허용 요청 → [3] 토큰 발급 (FCM) \n   → [4] 서버에 토큰 저장 → [5] 서버에서 메시지 발송 API 호출 \n   → [6] 클라이언트에 메시지 수신 → [7] Service Worker가 알림 생성</code></pre></div>\n<hr>\n<h2>🛠️ 준비물</h2>\n<ul>\n<li>Firebase 프로젝트 (<a href=\"https://console.firebase.google.com\" target=\"_blank\" rel=\"nofollow\">https://console.firebase.google.com</a>)</li>\n<li>웹사이트 (HTML + JS)</li>\n<li>Firebase SDK (fcm)</li>\n<li>Node.js 또는 백엔드 서버 (알림 보내는 용도)</li>\n<li>크롬 브라우저 (알림 테스트 용)</li>\n</ul>\n<hr>\n<h2>1. 🔧 Firebase 프로젝트 생성 및 웹앱 등록</h2>\n<ol>\n<li>Firebase 콘솔 접속 → 새 프로젝트 만들기</li>\n<li>‘웹’ 아이콘 클릭해서 웹 앱 등록</li>\n<li>Firebase SDK 스크립트 받아서 HTML에 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Firebase App (필수) --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- Firebase Messaging --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.gstatic.com/firebasejs/10.12.0/firebase-messaging-compat.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ol start=\"4\">\n<li><code class=\"language-text\">firebaseConfig</code> 객체 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> firebaseConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-api-key\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">authDomain</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-app.firebaseapp.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">projectId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-app\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">messagingSenderId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-sender-id\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">appId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-app-id\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nfirebase<span class=\"token punctuation\">.</span><span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span>firebaseConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>2. 📲 사용자에게 알림 권한 요청 + 토큰 발급</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> messaging <span class=\"token operator\">=</span> firebase<span class=\"token punctuation\">.</span><span class=\"token function\">messaging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getFcmToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> permission <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> messaging<span class=\"token punctuation\">.</span><span class=\"token function\">getToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">vapidKey</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-vapid-key\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FCM 토큰:\"</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// 👉 서버에 토큰 저장 필요!</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"토큰 에러\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2>3. 📡 서버에서 메시지 전송하기</h2>\n<h3>🔐 필요한 것</h3>\n<ul>\n<li>Firebase Admin SDK</li>\n<li>서버 Node.js 예시</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> admin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"firebase-admin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> serviceAccount <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./service-account-key.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nadmin<span class=\"token punctuation\">.</span><span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">credential</span><span class=\"token operator\">:</span> admin<span class=\"token punctuation\">.</span>credential<span class=\"token punctuation\">.</span><span class=\"token function\">cert</span><span class=\"token punctuation\">(</span>serviceAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">token</span><span class=\"token operator\">:</span> <span class=\"token string\">\"클라이언트 FCM 토큰\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">notification</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"✨ 알림이 왔어요!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러분 안녕하세요!\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nadmin<span class=\"token punctuation\">.</span><span class=\"token function\">messaging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"보낸 결과:\"</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러:\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>4. 🧙 서비스 워커로 알림 수신 및 표시</h2>\n<h3><code class=\"language-text\">firebase-messaging-sw.js</code> (웹 루트에 위치해야 함)</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">importScripts</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">importScripts</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.gstatic.com/firebasejs/10.12.0/firebase-messaging-compat.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfirebase<span class=\"token punctuation\">.</span><span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-api-key\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">projectId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-project-id\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">messagingSenderId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-sender-id\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">appId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your-app-id\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> messaging <span class=\"token operator\">=</span> firebase<span class=\"token punctuation\">.</span><span class=\"token function\">messaging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmessaging<span class=\"token punctuation\">.</span><span class=\"token function\">onBackgroundMessage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">payload</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"백그라운드 메시지:\"</span><span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> title<span class=\"token punctuation\">,</span> body <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">.</span>notification<span class=\"token punctuation\">;</span>\n  self<span class=\"token punctuation\">.</span>registration<span class=\"token punctuation\">.</span><span class=\"token function\">showNotification</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/logo.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 아이콘 경로</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>✅ 결과 확인</h2>\n<ol>\n<li>웹에서 알림 권한 허용</li>\n<li>서버에서 메시지 보내면</li>\n<li>윈도우 오른쪽 아래에서 ✨ “알림이 왔어요!” 팝업 확인!</li>\n</ol>\n<hr>\n<h2>🧩 마무리</h2>\n<p>이제 여러분도 알람이처럼 구글의 마법을 이용해 웹사이트에서 알림을 보내는 <strong>알림 마법사</strong>가 될 수 있어요!</p>\n<blockquote>\n<p>“정보를 즉시 전달하는 알림은 사용자 경험을 높이는 좋은 도구입니다.”</p>\n</blockquote>\n<p>이 기술을 여러분의 웹앱에도 꼭 활용해보세요! 🪄</p>\n<hr>\n<h2>📚 참고 자료</h2>\n<ul>\n<li><a href=\"https://firebase.google.com/docs/cloud-messaging\" target=\"_blank\" rel=\"nofollow\">Firebase Cloud Messaging 공식 문서</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API\" target=\"_blank\" rel=\"nofollow\">서비스 워커 소개</a></li>\n</ul>","frontmatter":{"title":"🧠구글 FCM으로 윈도우 알림 보내기 ?","summary":"브라우저가 닫힌상태로 알림 갈까","date":"2025.07.16.","categories":["Web"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEqElEQVR42k2U6VNTVxjG8x/U6Uyn1FpxsCq2o3Z06tLigiYhAZShbAYEkqICSgpZICwRDB0IYUu4SUhuVgjBhUWDmhCWLARyb242EwJII5UASdAKjJ+6fGpv1A+dec+ZM2fmN+9z3vPMg5HbN9BSQuH/l9oR6XdGNc5oHxJRwehNROmIdusDPJ1XDoUVUPgDhUGXDIoAllDvTKjHvCowr/JNr1r1wdqhAG3Qz3601G5cEZlftQw5hMYAaAm2DiOyufUPPEYOR8Xjfp3VrZ306CG/AfIZIP+g0dGnhyUjFnKPObfbRgenecNw1xMvMB7gaK0tQzBoC6E8BrRH+qeery/NOodqX/jsq8EFn9sReI4s+l3hFd8vwLOc5tF7rg2maKycqy3hqKhdQ52P3cDkshKOoHBYPb3oeAb4wbMO6xji9kyZzB6Pe2ExEFpZZMrMJMEcXWZiqmYqQVOlZLL53ix3JKY8JlsGRRUG56LHNq7TboYCiz7n9OT4u53wv/9s/bUTYsotP5aKD2HLvk1j4Bj913qdFMAkMr1UOaIoj8JhiWkZ0DnvaOwNaitbba1XWwGtoQE0lHLvf4O/tSsx/ZPEy7sSL39xNONiuTC7w8LQelSOSAwG34+uvM/3Ex/O5ttzeuAcAMngTuUKIFz9oyNJeRfSfq6h1VVSa/Yez959upjUbSH3IiIrOrANDEpKZsMUqSuHN/7dVVpWyxOy1FksQSgS5KrQQW8CVifUm7YHQWN/NZWBJzELAHuhCO4wvkT/HyOfW2ffs1OknqSy9rizKanswRJV4JrQXiSCcoXO6u6H3mHx/Jjqzcz9NZOWK36QLYDIYlhgeoV6CSOcDh6+XHz6BvdEYUM8Lo9Yq8nmjReJHUViKF+MlPEN80/VS/q+vz2Ph9tYdXRWITB7Q+GR2NZi01bCUWIV97MfiGcorSeLOHsvZZ253kIBvddEaAcoU+itqWud6GQiOo2BXTDPPE1lNKfzZn4dW1I6IhgFHKlQuc5XiPA05fGC+sOZZSS+lSLzoG8ukHqvtz6coBNGKtNH6wqtTJz/DkFXlXYQS8XRlHIogum1hW4qvRmcp4npNQcI9KNZd0/kc4/lNp8s5GW0W/tqKL83XrBUE+FqrK8hxcsmvGvH5WfmJ+a1S20hVHbklhJJwFXGJ1fsJ7D2YenxF6sSsLS4C3TKTVawCYvUEVY52OWmlODdFAszZYeH5xZdOUYWqZAoCocFlrUTpJavzt8+kFq7L5kaf670UGrt7kssakFBgJNuYqR4W/JcjVdMDIKelrrMIQ7cxGfUDwz6tjFod75hIbWiJ+5UydcE1n58dQKeeZDI2oNlpZHojeUlDRUVo6K2FzppXylhhXXqz9YkIRmf2zigcb3GoC7jG1+gdi3vevxlUll8MhWVsOfcrT3nbn9+kvzpkazviWXF1Gb+oFHQq1YIe+RydecozJ/4LWbPWIzAETXyGrStsTUzLKWJAU5UivS3BWOlHSPVsqm2JwHAvArCmwrXFujakTq3FcgbNFg+JkksTNAdCve7/+h3v9V43g54tga8W9rn2+hZjWyiZkL7yObWZLPva+4j8h+gNsa52BOBYAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/2db320c6fc3555a499df49153de071ac/34104/alart.png","srcSet":"/static/2db320c6fc3555a499df49153de071ac/5ce94/alart.png 256w,\n/static/2db320c6fc3555a499df49153de071ac/8a20a/alart.png 512w,\n/static/2db320c6fc3555a499df49153de071ac/34104/alart.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/2db320c6fc3555a499df49153de071ac/99d55/alart.webp 256w,\n/static/2db320c6fc3555a499df49153de071ac/3591c/alart.webp 512w,\n/static/2db320c6fc3555a499df49153de071ac/e306d/alart.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":1024}},"publicURL":"/static/2db320c6fc3555a499df49153de071ac/alart.png"}}}}]}},"pageContext":{"slug":"/fcm_web_notification_story/"}},"staticQueryHashes":[],"slicesMap":{}}