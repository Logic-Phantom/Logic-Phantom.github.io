{"componentChunkName":"component---src-templates-post-template-tsx","path":"/cleopatra-xml-labeler-workflow/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>CLEOPATRA XML 구조와 코드 자동화 도구 구축기</h1>\n<h2>📌 시작하며</h2>\n<p>Figma 디자인을 CLEOPATRA XML(.clx)로 자동 변환하는 프로젝트를 진행하며,\n단순한 태그 매핑을 넘어, XML 정합성 검사, 자동화 배포, 라벨링 자동화까지 이어지는\n엔드-투-엔드 개발 워크플로를 구축하게 되었습니다.</p>\n<p>이 글에서는 그 과정에서 마주한 문제, CLEOPATRA의 XML 구조와 자주 쓰는 태그/속성,\n그리고 GitHub Actions를 이용한 자동화 도구 구축 사례까지 자세히 소개합니다.</p>\n<hr>\n<h2>1. CLEOPATRA <code class=\"language-text\">.clx</code> XML 구조 분석</h2>\n<p>CLEOPATRA는 <code class=\"language-text\">.clx</code> 확장자의 XML 기반 UI 마크업을 사용합니다. 처음엔 단순한 XML로 보였지만, 다음과 같은 구조적 특성과 규칙이 존재합니다.</p>\n<h3>🎯 자주 사용하는 CLEOPATRA 태그</h3>\n<table>\n<thead>\n<tr>\n<th>태그</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">&lt;cl:button></code></td>\n<td>버튼 컴포넌트, <code class=\"language-text\">id</code>, <code class=\"language-text\">label</code>, <code class=\"language-text\">x</code>, <code class=\"language-text\">y</code>, <code class=\"language-text\">width</code>, <code class=\"language-text\">height</code> 속성 필수</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;cl:inputbox></code></td>\n<td>입력창 컴포넌트, <code class=\"language-text\">id</code>, <code class=\"language-text\">x</code>, <code class=\"language-text\">y</code>, <code class=\"language-text\">type</code> 필수</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;cl:grid></code></td>\n<td>테이블 형태의 그리드. 하위에 <code class=\"language-text\">&lt;cl:gridcolumn></code>, <code class=\"language-text\">&lt;cl:gridheader></code>, <code class=\"language-text\">&lt;cl:griddetail></code> 존재</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;cl:image></code></td>\n<td>이미지 삽입용. <code class=\"language-text\">src</code>, <code class=\"language-text\">x</code>, <code class=\"language-text\">y</code>, <code class=\"language-text\">width</code>, <code class=\"language-text\">height</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;cl:appspec></code></td>\n<td>전체 앱 설정 메타정보 포함</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;cl:model></code></td>\n<td>데이터 모델 정의 영역. <code class=\"language-text\">std:sid</code> 사용</td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">cl:</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btnSubmit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>저장<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>120<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<hr>\n<h2>2. XML 정합성 검사 자동화</h2>\n<p>초기에는 사람이 직접 <code class=\"language-text\">.clx</code> 파일을 열고 태그 오류를 일일이 확인했습니다. 그러나 자동 변환이 많아지면서, <strong>자동 XML 정합성 검사기</strong>를 제작하게 되었습니다.</p>\n<h3>✅ 예외 케이스 예시</h3>\n<ul>\n<li><code class=\"language-text\">&lt;cl:button></code> 태그에 <code class=\"language-text\">id</code> 누락 → XML 파서 오류</li>\n<li><code class=\"language-text\">&lt;cl:model></code> 내 <code class=\"language-text\">std:sid</code> 중복 → CLEOPATRA 실행 시 충돌</li>\n<li><code class=\"language-text\">&lt;cl:grid></code> 내부 구조 누락 → 화면 비정상 렌더링</li>\n</ul>\n<h3>🔧 해결 방법</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Java DOM 파서를 통한 XML 유효성 검사 예시</span>\n<span class=\"token class-name\">DocumentBuilder</span> builder <span class=\"token operator\">=</span> <span class=\"token class-name\">DocumentBuilderFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">newDocumentBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Document</span> doc <span class=\"token operator\">=</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test.clx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">NodeList</span> buttons <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cl:button\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> buttons<span class=\"token punctuation\">.</span><span class=\"token function\">getLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Element</span> btn <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Element</span><span class=\"token punctuation\">)</span> buttons<span class=\"token punctuation\">.</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>btn<span class=\"token punctuation\">.</span><span class=\"token function\">hasAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button 태그에 id 누락됨\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2>3. 자동화된 .clx 파일 생성</h2>\n<p>클래스명 기반으로 디자인 요소를 분류하고, 이를 XML 구조로 자동 변환하기 위해\n<strong>Labeler 자동화 스크립트</strong>를 제작했습니다.</p>\n<h3>🛠 라벨러 예시 구조</h3>\n<ul>\n<li>입력: Figma JSON</li>\n<li>처리: 클래스 추출 → CLEOPATRA XML 매핑</li>\n<li>출력: <code class=\"language-text\">.clx</code>, <code class=\"language-text\">.js</code> 자동 생성 + <code class=\"language-text\">label.txt</code> 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">src/\n ├─ figma/\n │   └─ parser.js\n ├─ generator/\n │   ├─ ClxWriter.java\n │   └─ LabelFileWriter.java\n └─ output/\n     ├─ result.clx\n     └─ label.txt</code></pre></div>\n<hr>\n<h2>4. GitHub Actions 기반 자동화 배포</h2>\n<p>변환기 코드를 커밋하거나 Pull Request 시, 자동으로 다음 작업을 하도록 설정했습니다.</p>\n<ul>\n<li><code class=\"language-text\">.clx</code> 정합성 검사</li>\n<li>Java 빌드 및 테스트</li>\n<li>변환 결과물 <code class=\"language-text\">.zip</code> 생성</li>\n<li>Slack 또는 Discord 알림 (선택)</li>\n</ul>\n<h3>📦 GitHub Actions 예시 (<code class=\"language-text\">.github/workflows/build.yml</code>)</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and Validate CLEOPATRA XML\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> main <span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> main <span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">validate-xml</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Java\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>java@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">java-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'17'</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and Validate\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          ./gradlew build\n          java -jar validator.jar output/result.clx</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Archive result\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/upload<span class=\"token punctuation\">-</span>artifact@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> clx<span class=\"token punctuation\">-</span>outputs\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> output/</code></pre></div>\n<hr>\n<h2>✅ 마무리하며</h2>\n<p>CLEOPATRA XML을 다루는 것은 단순한 UI 마크업 이상의 작업이었습니다.\nFigma → XML 자동 변환 → 정합성 검증 → 배포 자동화까지,\n전체 흐름을 스크립트와 워크플로로 통합하면서 생산성과 안정성을 크게 높일 수 있었습니다.</p>\n<p>이 글이 자동화 도구를 도입하려는 분들께 도움이 되길 바랍니다.</p>","frontmatter":{"title":"CLEOPATRA XML 구조와 코드 자동화 도구 구축기","summary":"Figma → XML 자동 변환 → 정합성 검증 → 배포 자동화","date":"2025.06.25.","categories":["ETC"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADBUlEQVR42mPQyt2lmbNTNXMHDG1XzdiukbVDM3snEKlkbFfJ2KGVsxMZ6Rbs0c3frZ27i0EzGyRnUb7fqnK/ZTkIWVXs183doZG5TT1zu0/rUb/2Y2qZQOO2a2SDSKA2w+J9+oV7tXJ2MCinbbWr2n/22bdzz7+fff794qsfl17/ylx4Tz55q0H+jpJFl/PnXbQs22tYsNMgf5de3k6Dgl26ebt0cndqZm1nUEje5Fi99+6nP6ef/br85vfrv/9f/v639fbvrAW3FJPWezceTJx8Orz7WN7sc/ETT+bPOR/aeVQldbNGxhb1jC0McvHrbMt3XXv7+/Lr3xdf/Tr++Mexxz9e/fm/5swLycgVFoVbs2eeDu04HNN3PH7CibSpp8O7jmqmb1JJ3qCasoFBOnqlTcm2y69/nXz6E6jt4P3vu29/vfru74qTT2Uil6okrPKo2W1TvM21epdTxS7Puj0O5bu00jcoJaxRTlzLIBm+xKpw09U3v888B1l79jnI8fe//l99+plw0IKwtv0TttzwqtvN67dAPGypdORymajlCrErFeNAiEE8eL5F7vpbH/5cev371NOf19//efzt39t//9edfSbgOyex99Cig/cDG3dpJa8yyV4vGbpINnKJSsJK5fgV8tFLGUQDZptlrb7+7jfQ2YfufweSD778A/p59cknYgGzpYLn+tRscy3bPG3HrQmbr1vmrrPK36CdukY9aaV85GIGYZ/pphnLH379+/Db/wdf/z3+8f/pz38f//9fd+aRiM80cd/pqlHzk3v2Tdl2s3fj1dCmnX41WzXjl8qGzpcOnsMg7DVFL3Hh4TvvTj/6ePLBx5MPPx679+HC86/Ttl0X9pgk4TtV1GsKv9sk/+pNPpWbBD2nSPjPkAqYKR04U9J/OoOY92Rxn8myAVPlAqfJBU4Ho2lyQdNlAqaJe08CIgmfyZK+U/hc+oFIym+qdMA06YDpUv7TxX2mMIh6ThD1mCDs3g9HImAEFBTzRCBxr4lAJOY5EaQejMS8JgIAcled4qTC9uUAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/1d1093d2200be4a08f3ab76b06988357/4d776/etc.png","srcSet":"/static/1d1093d2200be4a08f3ab76b06988357/4a410/etc.png 384w,\n/static/1d1093d2200be4a08f3ab76b06988357/f5189/etc.png 768w,\n/static/1d1093d2200be4a08f3ab76b06988357/4d776/etc.png 1536w","sizes":"(min-width: 1536px) 1536px, 100vw"},"sources":[{"srcSet":"/static/1d1093d2200be4a08f3ab76b06988357/b642b/etc.webp 384w,\n/static/1d1093d2200be4a08f3ab76b06988357/c9564/etc.webp 768w,\n/static/1d1093d2200be4a08f3ab76b06988357/18b4b/etc.webp 1536w","type":"image/webp","sizes":"(min-width: 1536px) 1536px, 100vw"}]},"width":1536,"height":1024}},"publicURL":"/static/1d1093d2200be4a08f3ab76b06988357/etc.png"}}}}]}},"pageContext":{"slug":"/cleopatra-xml-labeler-workflow/"}},"staticQueryHashes":[],"slicesMap":{}}