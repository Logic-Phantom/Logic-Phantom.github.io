{"componentChunkName":"component---src-templates-post-template-tsx","path":"/web-vitals-guide-with-diagrams/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>🌐 웹 성능 최적화 (Web Vitals) 완벽 가이드</h1>\n<blockquote>\n<p>본 문서는 기본 개념부터 실전 코드, 심화 이론까지 한 번에 정리한 확장판입니다.<br>\n아래에는 LCP·CLS 시각화 그림과 즉시 적용 가능한 최적화 코드 예제가 포함되어 있습니다.</p>\n</blockquote>\n<h2>1. Core Web Vitals 핵심 요약</h2>\n<ul>\n<li><strong>LCP (Largest Contentful Paint)</strong>: 가장 큰 콘텐츠가 화면에 나타나기까지 걸린 시간. 목표 ≤ <strong>2.5s</strong></li>\n<li><strong>INP (Interaction to Next Paint)</strong>: 상호작용 후 다음 페인트까지 지연. 목표 ≤ <strong>200ms</strong></li>\n<li><strong>CLS (Cumulative Layout Shift)</strong>: 예기치 않은 레이아웃 이동의 누적. 목표 ≤ <strong>0.1</strong></li>\n</ul>\n<hr>\n<h2>2. 시각화: LCP, CLS 이해하기</h2>\n<h3>2.1 LCP 타임라인 예시</h3>\n<p>아래 타임라인은 탐색 시작 → FCP → LCP 이벤트의 상대적 시점을 보여줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4ae1d28cd5c24788152f054de037f73/64756/lcp-diagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB7CAAAewgFu0HU+AAABgUlEQVR42o1Si2qFMAz1/79wg8FgqLVTq3346PMsqVe4uzBYIJyaJqcnMQ3ISikMOM8TwzBgWZaK7NM0QX6PEIOEEByT6AmnWUHKb3S9wEAYYqwcTc4ZRhssZoXeNAZKnucZbdtCKQXnNozyHWr8hJ5bWNVibd/glg5uFVinLxg6eydIWULDxYKVDAJxc2i7rqqy1iCz8OhgXYuQzlpQUkAxCmDMEZmc4zke1GlG0/c92I3WFE8IIVRPpDzngHyMcN4S4dUSj6dYeyF952ckb3hO3J4mwruAx8BJicgKvWy9oxn5i4QfMubCO/cJK2FVSElER8F0JQaLdKr6iGWFMfB1JaoKX4h+EUopafgOt5WcaqtMzuaCQ3y0DN4IIsRjM8oLNt77ugrTKOBth3gs2JcP+EOTqgR/emg67+eORDOOPGNaq/iYNa8ax4/jqNgwa6SDXleoSeDYHeFQFVtSwqtjna1j4b+/bRtmwvuet4RJx3GspA3+YayEC7j4bu0v+wGgYwgfLTEHewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a4ae1d28cd5c24788152f054de037f73/a59e9/lcp-diagram.webp 192w,\n/static/a4ae1d28cd5c24788152f054de037f73/0ca9f/lcp-diagram.webp 384w,\n/static/a4ae1d28cd5c24788152f054de037f73/dc9b9/lcp-diagram.webp 768w,\n/static/a4ae1d28cd5c24788152f054de037f73/e2c2f/lcp-diagram.webp 1152w,\n/static/a4ae1d28cd5c24788152f054de037f73/cbd37/lcp-diagram.webp 1200w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a4ae1d28cd5c24788152f054de037f73/3b721/lcp-diagram.png 192w,\n/static/a4ae1d28cd5c24788152f054de037f73/66595/lcp-diagram.png 384w,\n/static/a4ae1d28cd5c24788152f054de037f73/fe486/lcp-diagram.png 768w,\n/static/a4ae1d28cd5c24788152f054de037f73/d2d74/lcp-diagram.png 1152w,\n/static/a4ae1d28cd5c24788152f054de037f73/64756/lcp-diagram.png 1200w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a4ae1d28cd5c24788152f054de037f73/fe486/lcp-diagram.png\"\n            alt=\"LCP 다이어그램\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><strong>개선 포인트</strong></p>\n<ul>\n<li>이미지/히어로 미디어의 파일 포맷(WebP/AVIF), 사이즈, 압축</li>\n<li>서버 응답 지연 감소(CDN, 캐시, TTFB 개선)</li>\n<li>크리티컬 CSS 인라인, JS 지연 로딩</li>\n</ul>\n<h3>2.2 CLS 레이아웃 시프트 예시</h3>\n<p>점선 박스는 <strong>레이아웃이 이동된 최종 위치</strong>를 의미합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f85e67bf028f29368c0d90100829bd43/64756/cls-diagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB7CAAAewgFu0HU+AAACHElEQVR42n2SXWvUUBCGA/VjpSgVe+OF9EsEwZv+wF64pSAo3oltr0ToTxDaam0FiyiFlUJLt9A2cXezm81mk81JstmP5HFOVtSrDry8mZOZ98zMGYP/LM9zOp0OrqDjurTbbWq1WsG+79NqtXDlu9VsYnsebhTRFESDwV8NQ4t48lPJD209pQgF2ldxjN/rEQlr3w+C4iyUs3BrC7W+TrC5SbqxAScn5FpQi0USHAsTJ+RJX5BAvy9+TC4gEY6U+HJpmpLr2Pl5yTbIS6WCWVmZCLrSWlNaCHyP0TAlFYFULhhKYjYcCkaQyThGEq4hNg5DsqVFchHKpqcLzsvliaBt24QSEARdkkRRrzdkZi7dbrdIHg7b0kFFcEykfhKnZ9KBVLqw+KfCO5MKV1f/VagfwvMc+lEPr9fFVz6B8hhIRPXqJR92DXb277K9N8Xe4UOCrkn8ZIlIhNS9UsHR6gojLahfrniUWOEkDrayC9RDi0RatX69ZnvHYG//Fh8/GRx8fUAaNskWHjMWobHMsODycz0ZjHSQEquYRrvB8ttlZl/MMvdqjlL5Jm9+vCdovmNXhL4c3Gf/820Ovz0i6dpkT58xvjHFYGammOFobW1SYbEqsgaWZXHhXHBaP+WoekTVqWLaluxdTUZyRrX6HdOsyOpc0ajXiE2L8PycRqVCenlJxzSLlTO4xvSOagvDCMfpyGK7jMfZdSn8Bnh7skyy2XkMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f85e67bf028f29368c0d90100829bd43/a59e9/cls-diagram.webp 192w,\n/static/f85e67bf028f29368c0d90100829bd43/0ca9f/cls-diagram.webp 384w,\n/static/f85e67bf028f29368c0d90100829bd43/dc9b9/cls-diagram.webp 768w,\n/static/f85e67bf028f29368c0d90100829bd43/e2c2f/cls-diagram.webp 1152w,\n/static/f85e67bf028f29368c0d90100829bd43/cbd37/cls-diagram.webp 1200w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f85e67bf028f29368c0d90100829bd43/3b721/cls-diagram.png 192w,\n/static/f85e67bf028f29368c0d90100829bd43/66595/cls-diagram.png 384w,\n/static/f85e67bf028f29368c0d90100829bd43/fe486/cls-diagram.png 768w,\n/static/f85e67bf028f29368c0d90100829bd43/d2d74/cls-diagram.png 1152w,\n/static/f85e67bf028f29368c0d90100829bd43/64756/cls-diagram.png 1200w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f85e67bf028f29368c0d90100829bd43/fe486/cls-diagram.png\"\n            alt=\"CLS 다이어그램\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><strong>개선 포인트</strong></p>\n<ul>\n<li>이미지/광고/임베드에 <strong>고정 크기</strong> 또는 <code class=\"language-text\">aspect-ratio</code> 지정</li>\n<li>웹폰트 로딩 전략(font-display, FOIT/FOUT 방지)</li>\n<li>레이아웃을 바꾸는 애니메이션 대신 <code class=\"language-text\">transform</code>/<code class=\"language-text\">opacity</code> 사용</li>\n</ul>\n<hr>\n<h2>3. 실전 코드 최적화 예제</h2>\n<h3>3.1 이미지 &#x26; 미디어 (LCP, CLS 모두 개선)</h3>\n<p><strong>HTML: 고정 크기와 지연 로딩</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 히어로 이미지: width/height 또는 aspect-ratio 지정 + lazy는 fold 아래에서만 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/hero.webp<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hero<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1200<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>630<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">decoding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>async<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">fetchpriority</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>high<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">Above-the-fold일</span> <span class=\"token attr-name\">때만</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n/>\n\n<span class=\"token comment\">&lt;!-- 아래 영역 이미지 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/gallery-1.avif<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Gallery<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>800<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>600<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazy<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">decoding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>async<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>CSS: 비율 기반 자리 확보</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.card-media</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">aspect-ratio</span><span class=\"token punctuation\">:</span> 4 / 3<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 고정 크기가 어려울 때 CLS 방지 */</span>\n  <span class=\"token property\">object-fit</span><span class=\"token punctuation\">:</span> cover<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Video: 포스터 + 미리 연결</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preconnect<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.example.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.example.com/intro.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>metadata<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">poster</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/intro-poster.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">playsinline</span> <span class=\"token attr-name\">muted</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<hr>\n<h3>3.2 폰트 최적화 (CLS, LCP)</h3>\n<p><strong>CSS: font-display로 FOIT/FOUT 제어</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@font-face</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"InterVar\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"/fonts/Inter-Variable.woff2\"</span><span class=\"token punctuation\">)</span></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"woff2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 100 900<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span> normal<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-display</span><span class=\"token punctuation\">:</span> swap<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 빠른 텍스트 표시 */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Metrics Override (CLS 감소: 폰트 교체 시 reflow 축소)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@font-face</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Brand Sans\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"/fonts/BrandSans.woff2\"</span><span class=\"token punctuation\">)</span></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"woff2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">ascent-override</span><span class=\"token punctuation\">:</span> 90%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">descent-override</span><span class=\"token punctuation\">:</span> 22%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-gap-override</span><span class=\"token punctuation\">:</span> 0%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">size-adjust</span><span class=\"token punctuation\">:</span> 102%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-display</span><span class=\"token punctuation\">:</span> optional<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3>3.3 JavaScript 실행 최적화 (INP, TBT, TTI)</h3>\n<p><strong>스크립트 로딩 전략</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 크리티컬하지 않은 스크립트는 defer/async --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/js/vendor.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defer</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/js/app.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- 모듈은 기본 defer와 유사 --></span></code></pre></div>\n<p><strong>긴 태스크 분할 (메인 스레드 점유 단축)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">chunkedWork</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">items<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">,</span> chunk <span class=\"token operator\">=</span> <span class=\"token number\">100</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">step</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">deadline</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>deadline<span class=\"token punctuation\">.</span><span class=\"token function\">timeRemaining</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> deadline<span class=\"token punctuation\">.</span>didTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c <span class=\"token operator\">&lt;</span> chunk <span class=\"token operator\">&amp;&amp;</span> i <span class=\"token operator\">&lt;</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">process</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token function\">requestIdleCallback</span><span class=\"token punctuation\">(</span>step<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">timeout</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">requestIdleCallback</span><span class=\"token punctuation\">(</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 사용</span>\n<span class=\"token function\">chunkedWork</span><span class=\"token punctuation\">(</span>bigArray<span class=\"token punctuation\">,</span> heavyCompute<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>이벤트 핸들러 최적화 (INP 개선)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 가벼운 핸들러에서 상태만 큐잉하고, 실제 무거운 작업은 idle/timeout으로 미룸</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">queueMicrotask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// React 18이라면 사용자 입력 우선권 보장</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3>3.4 Preload/Prefetch/Preconnect (LCP 단축)</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- LCP에 필요한 히어로 이미지, 핵심 폰트 등을 preload --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preload<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/hero.webp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">imagesrcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/hero@2x.webp 2x<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fetchpriority</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>high<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preload<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>font<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/fonts/Inter-Variable.woff2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>font/woff2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- 다음 페이지 리소스는 prefetch로 힌트 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/next/chunk-abc123.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>script<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preconnect<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.example.com<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<hr>\n<h3>3.5 Next.js/React 실전 팁 (LCP/INP/CLS)</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Next.js 13+</span>\n<span class=\"token comment\">// 1) dynamic import로 코드 스플리팅</span>\n<span class=\"token keyword\">import</span> dynamic <span class=\"token keyword\">from</span> <span class=\"token string\">'next/dynamic'</span>\n<span class=\"token keyword\">const</span> HeavyChart <span class=\"token operator\">=</span> <span class=\"token function\">dynamic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./HeavyChart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> ssr<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 2) 이미지 최적화</span>\n<span class=\"token keyword\">import</span> Image <span class=\"token keyword\">from</span> <span class=\"token string\">'next/image'</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Hero</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span></span>\n        <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/hero.webp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hero<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">priority</span>  <span class=\"token comment\">// LCP 후보일 때</span>\n        <span class=\"token attr-name\">width</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1200</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">630</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HeavyChart</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// React 18 concurrent 특성 활용 (INP 개선)</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> startTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">onFilterChange</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 무거운 상태 변경은 낮은 우선순위로</span>\n    <span class=\"token function\">setFilter</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3>3.6 측정과 모니터링 (RUM)</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onCLS<span class=\"token punctuation\">,</span> onINP<span class=\"token punctuation\">,</span> onLCP <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'https://unpkg.com/web-vitals@4/dist/web-vitals.attribution.js'</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">sendToAnalytics</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">metric</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// fetch/beacon 등으로 서버에 전송</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>metric<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> metric<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> metric<span class=\"token punctuation\">.</span>attribution<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">onCLS</span><span class=\"token punctuation\">(</span>sendToAnalytics<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">onINP</span><span class=\"token punctuation\">(</span>sendToAnalytics<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">onLCP</span><span class=\"token punctuation\">(</span>sendToAnalytics<span class=\"token punctuation\">)</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<hr>\n<h2>4. 체크리스트</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> LCP ≤ 2.5s, INP ≤ 200ms, CLS ≤ 0.1</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 히어로 미디어: preload + priority, 고정 크기 지정</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 비동기 스크립트 로딩, 긴 태스크 분할</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 폰트: font-display + metrics override</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 이미지/광고/임베드: width/height or aspect-ratio</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> RUM 기반 상시 모니터링(Web Vitals API)</li>\n</ul>\n<hr>\n<h2>5. 부록: 문제 해결 트러블슈팅 힌트</h2>\n<ul>\n<li><strong>LCP가 높음</strong>: TTFB 확인 → 이미지 포맷/크기/압축 → preload → 크리티컬 CSS 인라인</li>\n<li><strong>INP가 높음</strong>: 이벤트 핸들러 무거움 → 긴 태스크 분할 → 메모리 누수/리스너 중복 확인</li>\n<li><strong>CLS가 높음</strong>: 사이즈 미지정 요소 탐지 → 폰트 교체 시 reflow → 애니메이션 속성 점검</li>\n</ul>","frontmatter":{"title":"🌐 웹 성능 최적화 (Web Vitals) 완벽 가이드 ","summary":"웹의 최적화","date":"2025.09.09.","categories":["Web"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC00lEQVR42i1QS08aYRTl33XVNC7aXRMXbRdNk6aLuqBtYiyaarXVpFjwSYsigvJQXhVkQAozgsi8AMGBGYZhQFBe8lCB+fpBmpzcnHtzT869R5arD8SWVGyD8p10fS/BWmxLlbshrh8AV71PlTrpq86w/idtCDjPNwYysQXC6YodZbac+Lo1ondTR2fsrofaPIxqDsNfdnC5hlDspmZN7LQx89mQmbGIkwZ+4ygjtgYy6HlCFva88cVt/5LuZM2CITg3pXYuG4IKtVPrIO2xugmr7GPXCFXFs43DP14vRvsIka/3ZMUWCNCiDU2r9tEV8+nGQUTrih2fs+dsZU5zHKKLP/y9BXd3xtHxZ8BV9uwuOlGNzAUJjm+OnEPJ0viHX1Mqh1IfmFTan71TT8zvmZD4uFxz4E8g8cZhpGxGS1T+Xshn+WM5G1KhtJir92V8vZ+r9Y5O2b+EiGdv4MOhdG3VRtsw/rcjdkqyTCaHU+kUk+v3HwAA3W5HGvQTbIWt9oZivto3UKQiYHMnmfIdoGJuITCVSISLXWBEUj/NtMpK644ZZ1iwhnhzkDeecHA+SvsWRLmb5zrVk9WFt8bddKHmWH2xMT3m2nzD3Ty4Ylc6rLKHFuUa6qUyqdDROyd5jZf3EOXC7UDGNwa5am/J533v0e/FSKEBCJ+Wtb6iUVO+DYRah8UvMDL33RSf3b9UHdBCvd0FoNyV+PpAVmhKhNDQRmilD7PQl0S+uRW9UPuCeiJNVx68i+uRsaeuj3MYUw3Sgp8qILgQSpS4Wm94NkzbRzJz28uzWtX8yhaCs9/06q869ZflNZS59n6aRR49dr6eODrjdt2kwU2afInwZQXeCyETbkGCFROYJYqYwkYPmb1Khq1kwBzS25lSJ05zMeU6hVJ8C8AI2JseDBj6QduhM2zyzQEPe/jhPRBGHKIw5H2hLbGQdIbbQlOCgGQoGYn/AdVadFx4p2CzAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/b19723a0b067f64fbee8d3ee9e5c7d61/4d776/WebVitals.png","srcSet":"/static/b19723a0b067f64fbee8d3ee9e5c7d61/4a410/WebVitals.png 384w,\n/static/b19723a0b067f64fbee8d3ee9e5c7d61/f5189/WebVitals.png 768w,\n/static/b19723a0b067f64fbee8d3ee9e5c7d61/4d776/WebVitals.png 1536w","sizes":"(min-width: 1536px) 1536px, 100vw"},"sources":[{"srcSet":"/static/b19723a0b067f64fbee8d3ee9e5c7d61/b642b/WebVitals.webp 384w,\n/static/b19723a0b067f64fbee8d3ee9e5c7d61/c9564/WebVitals.webp 768w,\n/static/b19723a0b067f64fbee8d3ee9e5c7d61/18b4b/WebVitals.webp 1536w","type":"image/webp","sizes":"(min-width: 1536px) 1536px, 100vw"}]},"width":1536,"height":1024}},"publicURL":"/static/b19723a0b067f64fbee8d3ee9e5c7d61/WebVitals.png"}}}}]}},"pageContext":{"slug":"/web-vitals-guide-with-diagrams/"}},"staticQueryHashes":[],"slicesMap":{}}